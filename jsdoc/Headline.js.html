<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Headline.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Headline.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict";

var Helper = require('./Helper');

/**
 * Represents a Headline of the newspaper
 * @class
 * 
 * @property title          The story's title
 * @property description    The story's description
 * @property linkUrl        The link to the story's complete text (Zero Hora's website)
 * @property imgUrl         The link to the story's image (can be null)
 * @property imgTitle       The title of the story's image (can be null)
 * 
 * @author Bruno Gabriel Fernandes
 */
class Headline {
    
  /**
   * 
   * @constructor
   * 
   * @param {object} containerA  The &amp;lt;div class="container-a"&amp;gt; jQuery element wich contains the headline.
   * 
   * @throws {Error} Will throw error if there is an problem extracting the content.
   */
  constructor(containerA) {
    
    this.title = null;
    this.description = null;
    this.linkUrl = null;
    this.imgUrl = null;
    this.imgTitle = null;
    
    //the title is a &lt;a> inside a &lt;h3 class="cartola"> element
    var title = containerA.find('.cartola a');
    if (title.length === 0)
      throw new Error('Title &lt;a> tag not found.');
    
    this.title = title.text();
    
    //we can also get the URL of the headline here
    this.linkUrl = title.attr('href');
    
    //the description is a &lt;a> inside a &lt;h4 class="manchete">
    var desc = containerA.find('.manchete');
    if (desc.length === 0)
      throw new Error('Description &lt;a> tag not found.');
    
    this.description = desc.text();
    
    //check to see if there is a image
    var image = containerA.find('img');
    if (image.length === 1) {
      this.imgUrl = image.attr('src');
      this.imgTitle = image.attr('title');
    }
     
  }
  
  /**
   * Creates a jQuery element based on the Headline
   * @method
   *
   * @returns {object} The jQuery object for the Headline
   * 
   * @throws {Error} Throws error if required fields are not present.
   */
  render(){
    
    if (!this.title || !this.description || !this.linkUrl)
      throw new Error('Headline needs title, description and linkUrl! It can\' be rendered.');
    
    //the left column holds the picture (some headlines don't have pictures)
    var element = $('&lt;div class="headline">&lt;div class="left-column">&lt;/div>&lt;div class="right-column">&lt;/div>&lt;/div>');
    var leftColumn = element.find('.left-column');
    var rightColumn = element.find('.right-column');
    
    var titleHtml = '&lt;a class="title" title="' + Helper.removeQuotes(this.title) + '" href="' + this.linkUrl + '">' + this.title + '&lt;/a>';
    rightColumn.append(titleHtml);
    
    var descriptionHtml = '&lt;a class="description" title="' + Helper.removeQuotes(this.description) + '" href="' + this.linkUrl + '">' + this.description + '&lt;/a>'; 
    rightColumn.append(descriptionHtml);  
    
    if (this.imgUrl &amp;&amp; this.imgTitle) {
      var imgHtml = '&lt;img title="' + Helper.removeQuotes(this.imgTitle) + '" alt="' + Helper.removeQuotes(this.imgTitle) +  '" src="' + this.imgUrl + '" />';
      leftColumn.append(imgHtml);
    } else {
      //if there is no image in the headline, we add a class "no-image" so that the headline font-size can be bigger
      rightColumn.addClass('no-image');
    }
    
    //adds the event to open the links in a new tab
    element.find('a').on('click', function(){
     chrome.tabs.create({url: $(this).attr('href')});
     return false;
    });
    
    return (element);
  }
    
}

module.exports = Headline;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Headline.html">Headline</a></li><li><a href="Helper.html">Helper</a></li><li><a href="Parser.html">Parser</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Thu May 05 2016 13:14:54 GMT-0300 (BRT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
